{% extends 'base.html' %}
{% load loomads_tags %}

{% block title %}Ideenboards - Organisation{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Header Ad Zone -->
    {% show_ad_zone 'organization_boards_header' css_class='mb-3' %}
    
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>Ideenboards</h1>
                <a href="{% url 'organization:board_create' %}" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Neues Board
                </a>
            </div>
        </div>
    </div>

    <!-- Tool Erklärung -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="organization-info-card">
                <div class="info-card-background"></div>
                <div class="info-card-content">
                    <div class="row align-items-center">
                        <div class="col-md-2 text-center mb-3 mb-md-0">
                            <div class="info-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                        </div>
                        <div class="col-md-10">
                            <h3 class="info-title">
                                IdeenBoards - Kreative Zusammenarbeit im Team
                            </h3>
                            <p class="info-description">
                                <strong>Ideen visualisieren, teilen und gemeinsam weiterentwickeln!</strong> IdeenBoards ist dein digitaler Workspace
                                für Brainstorming, Projektplanung und kreative Kollaboration - inklusive <strong>Audio-Calls und Screen-Sharing</strong> für effektive Team-Meetings.
                                <strong>Workloom verbindet:</strong> Lerne voneinander, tausche Erfahrungen aus und profitiere von wertvollen Wachstumstipps aus der Community!
                            </p>
                            <div class="info-workflow">
                                <div class="workflow-step">
                                    <div class="step-number">1</div>
                                    <div class="step-text">Board erstellen & strukturieren</div>
                                </div>
                                <div class="workflow-arrow">→</div>
                                <div class="workflow-step">
                                    <div class="step-number">2</div>
                                    <div class="step-text">Ideen sammeln & besprechen (Audio/Screen)</div>
                                </div>
                                <div class="workflow-arrow">→</div>
                                <div class="workflow-step">
                                    <div class="step-number">3</div>
                                    <div class="step-text">Mit Team teilen & kollaborieren</div>
                                </div>
                            </div>
                            <p class="info-tagline">
                                <i class="fas fa-users me-2"></i>
                                <em>Kreative Ideen + Community-Austausch = Gemeinsam wachsen mit Workloom!</em>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <!-- Navigation Tabs -->
            <ul class="nav nav-pills board-tabs mb-4" id="boardTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all-boards"
                            type="button" role="tab">
                        <i class="fas fa-th-large me-2"></i>Alle Boards
                        <span class="badge bg-white text-dark ms-2">{{ boards.count }}</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="created-tab" data-bs-toggle="tab" data-bs-target="#created-boards"
                            type="button" role="tab">
                        <i class="fas fa-user-edit me-2"></i>Meine Boards
                        <span class="badge bg-white text-dark ms-2">{{ created_boards.count }}</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="shared-tab" data-bs-toggle="tab" data-bs-target="#shared-boards"
                            type="button" role="tab">
                        <i class="fas fa-users me-2"></i>Geteilte Boards
                        <span class="badge bg-white text-dark ms-2">{{ collaborated_boards.count }}</span>
                    </button>
                </li>
            </ul>
            
            <div class="tab-content" id="boardTabsContent">
                <!-- Alle Boards -->
                <div class="tab-pane fade show active" id="all-boards" role="tabpanel">
                    {% if boards %}
                        {% include 'organization/board_grid.html' with board_list=boards %}
                    {% else %}
                        {% include 'organization/no_boards.html' %}
                    {% endif %}
                </div>
                
                <!-- Eigene Boards -->
                <div class="tab-pane fade" id="created-boards" role="tabpanel">
                    {% if created_boards %}
                        {% include 'organization/board_grid.html' with board_list=created_boards %}
                    {% else %}
                        <div class="text-center py-5">
                            <i class="fas fa-chalkboard fa-3x text-muted mb-3"></i>
                            <h4>Keine eigenen Boards</h4>
                            <p class="text-muted">Du hast noch keine eigenen Ideenboards erstellt.</p>
                            <a href="{% url 'organization:board_create' %}" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Erstes Board erstellen
                            </a>
                        </div>
                    {% endif %}
                </div>
                
                <!-- Geteilte Boards -->
                <div class="tab-pane fade" id="shared-boards" role="tabpanel">
                    {% if collaborated_boards %}
                        {% include 'organization/board_grid.html' with board_list=collaborated_boards %}
                    {% else %}
                        <div class="text-center py-5">
                            <i class="fas fa-share-alt fa-3x text-muted mb-3"></i>
                            <h4>Keine geteilten Boards</h4>
                            <p class="text-muted">Es wurden noch keine Boards mit dir geteilt.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Separate Template für Board-Grid -->
    {% comment %}
    Erstelle separate Templates für wiederverwendbare Komponenten
    {% endcomment %}
    <template id="board-grid-template" style="display: none;">
        <div class="row">
            <!-- Board-Karten werden hier eingefügt -->
        </div>
    </template>

</div>

<style>
/* Organization Info Card Styles */
.organization-info-card {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.organization-info-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.organization-info-card .info-card-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #ffd93d 0%, #ff6b35 50%, #f7931e 100%);
    opacity: 0.95;
}

.organization-info-card .info-card-content {
    position: relative;
    z-index: 2;
    padding: 2.5rem;
    color: white;
}

.organization-info-card .info-icon {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
}

.organization-info-card .info-icon i {
    font-size: 2rem;
    color: white;
}

.organization-info-card:hover .info-icon {
    transform: scale(1.1) rotate(5deg);
    background: rgba(255, 255, 255, 0.3);
}

.organization-info-card .info-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: white;
    line-height: 1.3;
}

.organization-info-card .info-description {
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    color: rgba(255, 255, 255, 0.95);
}

.organization-info-card .info-workflow {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: 1.5rem 0;
    flex-wrap: wrap;
    gap: 1rem;
}

.organization-info-card .workflow-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    min-width: 140px;
}

.organization-info-card .step-number {
    width: 35px;
    height: 35px;
    background: rgba(255, 255, 255, 0.9);
    color: #ff6b35;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.organization-info-card .step-text {
    text-align: center;
    font-size: 0.85rem;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.95);
}

.organization-info-card .workflow-arrow {
    font-size: 1.5rem;
    color: rgba(255, 255, 255, 0.8);
    font-weight: bold;
    padding: 0 0.5rem;
}

.organization-info-card .info-tagline {
    font-size: 0.95rem;
    margin-bottom: 0;
    color: rgba(255, 255, 255, 0.9);
    font-style: italic;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .organization-info-card .info-card-content {
        padding: 1.5rem;
    }

    .organization-info-card .info-title {
        font-size: 1.2rem;
    }

    .organization-info-card .info-workflow {
        flex-direction: column;
        gap: 0.5rem;
    }

    .organization-info-card .workflow-arrow {
        transform: rotate(90deg);
        padding: 0.5rem 0;
    }

    .organization-info-card .workflow-step {
        width: 100%;
        min-width: unset;
    }
}

/* Board Tabs Styling */
.board-tabs {
    background: linear-gradient(135deg, #ffd93d 0%, #ff6b35 50%, #f7931e 100%);
    padding: 1rem;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(255, 107, 53, 0.2);
}

.board-tabs .nav-item {
    margin: 0 0.5rem;
}

.board-tabs .nav-link {
    color: rgba(255, 255, 255, 0.8);
    border: 2px solid transparent;
    border-radius: 10px;
    padding: 0.75rem 1.5rem;
    font-weight: 600;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}

.board-tabs .nav-link:hover {
    color: white;
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

.board-tabs .nav-link.active {
    background: white;
    color: #ff6b35;
    border-color: white;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.board-tabs .nav-link .badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
}

.board-tabs .nav-link.active .badge {
    background: #ff6b35 !important;
    color: white !important;
}

@media (max-width: 768px) {
    .board-tabs {
        flex-direction: column;
    }

    .board-tabs .nav-item {
        margin: 0.25rem 0;
        width: 100%;
    }

    .board-tabs .nav-link {
        width: 100%;
    }
}
</style>
{% endblock %}