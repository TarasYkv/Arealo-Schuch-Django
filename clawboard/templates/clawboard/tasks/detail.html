{% extends "clawboard/base_dark.html" %}

{% block title %}{{ task.name }} - Clawboard{% endblock %}

{% block cb_page %}
<div class="cb-page-header">
    <div>
        <div class="cb-breadcrumb">
            <a href="{% url 'clawboard:dashboard' %}">Clawboard</a>
            <span class="separator">/</span>
            <a href="{% url 'clawboard:task_list' %}">Aufgaben</a>
            <span class="separator">/</span>
            <span class="current">{{ task.name }}</span>
        </div>
        <h1 class="cb-page-title"><i class="bi bi-clock-history me-2"></i>{{ task.name }}</h1>
    </div>
    {% if task.is_enabled %}
        <span class="cb-badge cb-badge-green" style="font-size: 0.85rem; padding: 6px 14px;">Aktiv</span>
    {% else %}
        <span class="cb-badge cb-badge-gray" style="font-size: 0.85rem; padding: 6px 14px;">Inaktiv</span>
    {% endif %}
</div>

<div class="cb-card" style="max-width: 600px;">
    <div class="cb-card-body">
        <dl class="cb-dl">
            <dt>Zeitplan</dt>
            <dd><code>{{ task.schedule|default:"-" }}</code></dd>
            <dt>Naechste Ausfuehrung</dt>
            <dd>{{ task.next_run|date:"d.m.Y H:i"|default:"-" }}</dd>
            <dt>Letzte Ausfuehrung</dt>
            <dd>{{ task.last_run|date:"d.m.Y H:i"|default:"Noch nie" }}</dd>
        </dl>

        {% if task.payload %}
            <div style="margin-top: 16px;">
                <span class="cb-form-label">Payload</span>
                <div class="cb-code-block">
                    <code>{{ task.payload }}</code>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
