{% extends 'base.html' %}

{% block title %}Ad-Erstellungs-Assistent - {% block wizard_title %}LoomAds{% endblock %}{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h2 mb-0">
                <i class="bi bi-magic text-primary me-2"></i>
                Ad-Erstellungs-Assistent
            </h1>
            <p class="text-muted mb-0">Schritt-für-Schritt Anleitung zur Kampagnen-Erstellung</p>
        </div>
        <div>
            <a href="{% url 'loomads:wizard_cancel' draft.id %}" class="btn btn-outline-secondary"
               onclick="return confirm('Möchten Sie den Assistenten wirklich abbrechen?')">
                <i class="bi bi-x-circle"></i> Abbrechen
            </a>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="mb-0">Fortschritt</h5>
                <span class="badge bg-primary">{{ progress }}%</span>
            </div>
            <div class="progress" style="height: 30px;">
                <div class="progress-bar progress-bar-striped progress-bar-animated"
                     role="progressbar"
                     style="width: {{ progress }}%;"
                     aria-valuenow="{{ progress }}"
                     aria-valuemin="0"
                     aria-valuemax="100">
                    <strong>{{ progress }}%</strong>
                </div>
            </div>

            <!-- Step Indicator -->
            <div class="row mt-4">
                {% for step_value, step_label in draft.WIZARD_STEPS %}
                <div class="col">
                    <div class="text-center">
                        <div class="mb-2">
                            {% if step_value in draft.completed_steps %}
                                <i class="bi bi-check-circle-fill text-success fs-3"></i>
                            {% elif step_value == draft.current_step %}
                                <i class="bi bi-circle-fill text-primary fs-3"></i>
                            {% else %}
                                <i class="bi bi-circle text-muted fs-3"></i>
                            {% endif %}
                        </div>
                        <small class="{% if step_value == draft.current_step %}fw-bold text-primary{% else %}text-muted{% endif %}">
                            {{ step_label }}
                        </small>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Wizard Content -->
    <div class="card border-0 shadow-sm">
        <div class="card-body p-4">
            {% block wizard_content %}
            {% endblock %}
        </div>
    </div>
</div>
{% endblock %}
